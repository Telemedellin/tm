"use strict";function modificar_url(a,b){if(b||(b=null),Modernizr.history){var c={pagina:b};window.history.pushState(c,null,a)}}function link_fancy(a){a.preventDefault()}jQuery(function(a){window.Album=Backbone.Model.extend({urlRoot:"/tm/api/fotoalbum",defaults:{nombre:"",url:"",thumb:""}}),window.AlbumCollection=Backbone.Collection.extend({model:Album,url:"/tm/api/fotoalbum"});var b=function(b){return _.template(a("#"+b).html())};window.AlbumListView=Backbone.View.extend({tagName:"ul",initialize:function(){this.model.bind("reset",this.render,this);var b=this;this.model.bind("add",function(c){a(b.el).append(new AlbumListItemView({model:c}).render().el)})},render:function(){return _.each(this.model.models,function(b){a(this.el).append(new AlbumListItemView({model:b}).render().el)},this),this}}),window.AlbumListItemView=Backbone.View.extend({tagName:"li",template:b("albumListItemViewTemplate"),render:function(){return a(this.el).html(this.template(this.model.toJSON())),this},close:function(){a(this.el).unbind(),a(this.el).remove()}}),window.AlbumView=Backbone.View.extend({template:b("albumViewTemplate"),initialize:function(){this.model.bind("change",this.render,this)},render:function(){return a(this.el).html(this.template(this.model.toJSON())),this},events:{"change input":"change"},change:function(a){a.target},close:function(){a(this.el).unbind(),a(this.el).empty()}});var c=Backbone.Router.extend({routes:{imagenes:"listAlbum","imagenes/:nombre":"detailAlbum"},listAlbum:function(){this.albumList=new AlbumCollection,this.albumListView=new AlbumListView({model:this.albumList}),this.albumList.fetch(),a("#icontainer").html(this.albumListView.render().el)},detailAlbum:function(b){this.albumList=new AlbumCollection,this.album=this.albumList.where({nombre:b}),this.albumView&&this.albumView.close(),this.albumView=new AlbumView({model:this.album}),a("#container").html(this.albumView.render().el)}});new c,Backbone.history.start()});
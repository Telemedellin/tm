"use strict";function click_popup(a){var b=a.target.href;cargar_popup(b),a.preventDefault()}function cargar_popup(a){$.getJSON(a,success_popup),$("#container").append('<div id="loading">Cargando...</div>').fadeIn("slow")}function success_popup(a){switch(a.seccion){case"Telemedellín":var b="telemedellin.tmpl.html";break;case"Programas":var b="programas.tmpl.html";break;case"Documentales":case"Especiales":var b="documentales.tmpl.html";break;default:var b="seccion.tmpl.html"}$.get("/tm/js/libs/mustache/views/"+b,function(b){var c=window.location.href;modificar_url(a.url,a.seccion);var d=Mustache.render(b,a);$("#loading").remove(),$("#container").append(d).fadeIn("slow"),$(".close").attr("href",c)})}function cerrar_popup(a){if(Modernizr.history){var b=$(".close").attr("href");b!=window.location.href?modificar_url(b):modificar_url("/tm","Inicio")}$("#overlay").remove(),a.preventDefault()}function abrir_multimedia(a){""!=a&&$("a.fancybox."+a).trigger("click")}function modificar_url(a,b){if(b||(b=null),Modernizr.history){var c={pagina:b};window.history.pushState(c,null,a)}}function link_fancy(a){modificar_url(a.target.href),a.preventDefault()}function verificar_hash(){if(window.location.hash){var a=window.location.hash.replace("#","");a=$.trim(a),a.indexOf("imagenes")>=0?abrir_multimedia("imagenes"):a.indexOf("videos")>=0&&abrir_multimedia("videos")}}jQuery(function(a){a(document).on("click",".ajax a",click_popup),a(document).on("click","#overlay a.close",cerrar_popup);var b=0;a("a.fancybox").each(function(){var c=this,d=window.location.href,e=window.location.hash.substr(1),f=c.href,g=d;if(e)i=e;else{var h=f.indexOf("#"),i=f.substr(h).substr(1);g=f}var j="/tm/telemedellin/popup#"+i;a(this).fancybox({type:"ajax",href:j,autoSize:!1,padding:[9,20,9,20],afterLoad:function(){0>=b?modificar_url(g,"Álbumes"):modificar_url(f,"Álbumes"),b+=1},afterClose:function(){window.location.hash=""},beforeLoad:function(){this.width="80%"},beforeShow:function(){this.title?this.title+="<br />":this.title="",this.title+="<div><!--Facebook--><div id='fb-root'></div><div class='fb-like' data-send='false' data-layout='button_count' data-width='120' data-show-faces='false'></div>",this.title+="<div><!--Twitter--><a href='https://twitter.com/share' class='twitter-share-button' data-text='#telemedellin' data-lang='es'>Twittear</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></div>",this.title+="<div><!--G+--><div class='g-plusone' data-size='medium'></div></div>",this.title+="<div><!--Pinterest--><a href='//pinterest.com/pin/create/button/' data-pin-do='buttonBookmark' ><img src='//assets.pinterest.com/images/pidgets/pin_it_button.png' /></a><script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return;js = d.createElement(s); js.id = id;js.src = '//connect.facebook.net/es_LA/all.js#xfbml=1&appId=26028648916';fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script><script type='text/javascript'>window.___gcfg = {lang: 'es'};(function() {var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;po.src = 'https://apis.google.com/js/plusone.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);})();</script><script type='text/javascript' src='//assets.pinterest.com/js/pinit.js'></script></div></div>"},afterShow:function(){twttr.widgets.load()},helpers:{overlay:{css:{background:"rgba(0, 0, 0, .7)"}},title:{type:"inside"}}})}),verificar_hash(),a(document).bind("fullscreenerror",function(){})});
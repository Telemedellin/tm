"use strict";function click_popup(a){var b=a.target.href;cargar_popup(b),a.preventDefault()}function cargar_popup(a){$.getJSON(a,success_popup),$("#container").append('<div id="loading">Cargando...</div>')}function success_popup(a){switch(a.seccion){case"Telemedellín":var b="telemedellin.tmpl.html";break;case"Programas":var b="programas.tmpl.html";break;case"Documentales":case"Especiales":var b="documentales.tmpl.html";break;default:var b="seccion.tmpl.html"}$.get("/tm/js/libs/mustache/views/"+b,function(b){var c=window.location.href;modificar_url(a.url,a.seccion);var d=Mustache.render(b,a);$("#loading").remove(),$("#container").append(d),$(".close").attr("href",c)})}function cerrar_popup(a){if(Modernizr.history){var b=$(".close").attr("href");b!=window.location.href?modificar_url(b):modificar_url("/tm","Inicio")}$("#overlay").remove(),a.preventDefault()}function abrir_multimedia(a){""!=a&&$("a.fancybox."+a).trigger("click")}function modificar_url(a,b){if(b||(b=null),Modernizr.history){var c={pagina:b};window.history.pushState(c,null,a)}}function link_fancy(a){modificar_url(a.target.href),a.preventDefault()}function verificar_hash(){if(window.location.hash){var a=window.location.hash.replace("#","");a=$.trim(a),a.indexOf("imagenes")>=0&&abrir_multimedia("imagenes")}}jQuery(function(a){a(document).on("click",".ajax a",click_popup),a(document).on("click","#overlay a.close",cerrar_popup),a("a.fancybox").each(function(){var b=this,c=window.location.href,d=b.href,e=window.location.hash.substr(1),f=c;if(!e){var g=d.indexOf("#"),e=d.substr(g).substr(1);f=d}var h="/tm/telemedellin/popup#"+e;a(this).fancybox({type:"ajax",href:h,afterLoad:function(){modificar_url(f,"Álbumes")},afterClose:function(){modificar_url(f,null)},beforeShow:function(){this.title?this.title+="<br />":this.title="",this.title+='<a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-url="'+this.href+'">Tweet</a> ',this.title+='<iframe src="//www.facebook.com/plugins/like.php?href='+this.href+'&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:23px;" allowTransparency="true"></iframe>'},afterShow:function(){twttr.widgets.load()},helpers:{overlay:{css:{background:"rgba(0, 0, 0, .7)"}},title:{type:"inside"}}})}),verificar_hash()});